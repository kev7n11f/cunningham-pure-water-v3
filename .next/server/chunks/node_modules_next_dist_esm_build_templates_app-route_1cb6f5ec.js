module.exports=[99280,e=>{"use strict";let t,s,r;var n,a,i,o,l,h,u,c,d,p,f,m,g,y,b,w,_,v,k,S,x,R,E,P,M,T,A,O,$,N,I,j,q,C,L,W,U,D,F,H,B,X,K,J,V,z,Y,G,Q,Z,ee,et,es,er,en,ea,ei,eo,el,eh,eu,ec,ed,ep,ef,em,eg=e.i(47909),ey=e.i(74017),eb=e.i(96250),ew=e.i(59756),e_=e.i(61916),ev=e.i(14444),ek=e.i(37092),eS=e.i(69741),ex=e.i(16795),eR=e.i(87718),eE=e.i(95169),eP=e.i(47587),eM=e.i(66012),eT=e.i(70101),eA=e.i(26937),eO=e.i(10372),e$=e.i(93695);e.i(52474);var eN=e.i(220);function eI(e,t,s,r,n){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,s):n?n.value=s:t.set(e,s),s}function ej(e,t,s,r){if("a"===s&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?r:"a"===s?r.call(e):r?r.value:t.get(e)}let eq=function(){let{crypto:e}=globalThis;if(e?.randomUUID)return eq=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),s=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^s()&15>>e/4).toString(16))};function eC(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}let eL=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){let t=Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return Error(JSON.stringify(e))}catch{}}return Error(e)};class eW extends Error{}class eU extends eW{constructor(e,t,s,r){super(`${eU.makeMessage(e,t,s)}`),this.status=e,this.headers=r,this.requestID=r?.get("request-id"),this.error=t}static makeMessage(e,t,s){let r=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,s,r){return e&&r?400===e?new eB(e,t,s,r):401===e?new eX(e,t,s,r):403===e?new eK(e,t,s,r):404===e?new eJ(e,t,s,r):409===e?new eV(e,t,s,r):422===e?new ez(e,t,s,r):429===e?new eY(e,t,s,r):e>=500?new eG(e,t,s,r):new eU(e,t,s,r):new eF({message:s,cause:eL(t)})}}class eD extends eU{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class eF extends eU{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class eH extends eF{constructor({message:e}={}){super({message:e??"Request timed out."})}}class eB extends eU{}class eX extends eU{}class eK extends eU{}class eJ extends eU{}class eV extends eU{}class ez extends eU{}class eY extends eU{}class eG extends eU{}let eQ=/^[a-z][a-z0-9+.-]*:/i,eZ=e=>(eZ=Array.isArray)(e),e0=eZ;function e1(e){return"object"!=typeof e?{}:e??{}}let e2=e=>{try{return JSON.parse(e)}catch(e){return}},e4="0.71.1",e5=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",e6=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";function e9(...e){let t=globalThis.ReadableStream;if(void 0===t)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function e3(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return e9({start(){},async pull(e){let{done:s,value:r}=await t.next();s?e.close():e.enqueue(r)},async cancel(){await t.return?.()}})}function e8(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function e7(e){if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void await e[Symbol.asyncIterator]().return?.();let t=e.getReader(),s=t.cancel();t.releaseLock(),await s}let te=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});function tt(e){let t;return(s??(s=(t=new globalThis.TextEncoder).encode.bind(t)))(e)}function ts(e){let t;return(r??(r=(t=new globalThis.TextDecoder).decode.bind(t)))(e)}class tr{constructor(){n.set(this,void 0),a.set(this,void 0),eI(this,n,new Uint8Array,"f"),eI(this,a,null,"f")}decode(e){let t;if(null==e)return[];let s=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?tt(e):e;eI(this,n,function(e){let t=0;for(let s of e)t+=s.length;let s=new Uint8Array(t),r=0;for(let t of e)s.set(t,r),r+=t.length;return s}([ej(this,n,"f"),s]),"f");let r=[];for(;null!=(t=function(e,t){for(let s=t??0;s<e.length;s++){if(10===e[s])return{preceding:s,index:s+1,carriage:!1};if(13===e[s])return{preceding:s,index:s+1,carriage:!0}}return null}(ej(this,n,"f"),ej(this,a,"f")));){if(t.carriage&&null==ej(this,a,"f")){eI(this,a,t.index,"f");continue}if(null!=ej(this,a,"f")&&(t.index!==ej(this,a,"f")+1||t.carriage)){r.push(ts(ej(this,n,"f").subarray(0,ej(this,a,"f")-1))),eI(this,n,ej(this,n,"f").subarray(ej(this,a,"f")),"f"),eI(this,a,null,"f");continue}let e=null!==ej(this,a,"f")?t.preceding-1:t.preceding,s=ts(ej(this,n,"f").subarray(0,e));r.push(s),eI(this,n,ej(this,n,"f").subarray(t.index),"f"),eI(this,a,null,"f")}return r}flush(){return ej(this,n,"f").length?this.decode("\n"):[]}}n=new WeakMap,a=new WeakMap,tr.NEWLINE_CHARS=new Set(["\n","\r"]),tr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;let tn={off:0,error:200,warn:300,info:400,debug:500},ta=(e,t,s)=>{if(e){if(Object.prototype.hasOwnProperty.call(tn,e))return e;tu(s).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(tn))}`)}};function ti(){}function to(e,t,s){return!t||tn[e]>tn[s]?ti:t[e].bind(t)}let tl={error:ti,warn:ti,info:ti,debug:ti},th=new WeakMap;function tu(e){let t=e.logger,s=e.logLevel??"off";if(!t)return tl;let r=th.get(t);if(r&&r[0]===s)return r[1];let n={error:to("error",t,s),warn:to("warn",t,s),info:to("info",t,s),debug:to("debug",t,s)};return th.set(t,[s,n]),n}let tc=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"x-api-key"===e.toLowerCase()||"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class td{constructor(e,t,s){this.iterator=e,i.set(this,void 0),this.controller=t,eI(this,i,s,"f")}static fromSSEResponse(e,t,s){let r=!1,n=s?tu(s):console;async function*a(){if(r)throw new eW("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(let s of tp(e,t)){if("completion"===s.event)try{yield JSON.parse(s.data)}catch(e){throw n.error("Could not parse message into JSON:",s.data),n.error("From chunk:",s.raw),e}if("message_start"===s.event||"message_delta"===s.event||"message_stop"===s.event||"content_block_start"===s.event||"content_block_delta"===s.event||"content_block_stop"===s.event)try{yield JSON.parse(s.data)}catch(e){throw n.error("Could not parse message into JSON:",s.data),n.error("From chunk:",s.raw),e}if("ping"!==s.event&&"error"===s.event)throw new eU(void 0,e2(s.data)??s.data,void 0,e.headers)}s=!0}catch(e){if(eC(e))return;throw e}finally{s||t.abort()}}return new td(a,t,s)}static fromReadableStream(e,t,s){let r=!1;async function*n(){let t=new tr;for await(let s of e8(e))for(let e of t.decode(s))yield e;for(let e of t.flush())yield e}return new td(async function*(){if(r)throw new eW("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{for await(let t of n())!e&&t&&(yield JSON.parse(t));e=!0}catch(e){if(eC(e))return;throw e}finally{e||t.abort()}},t,s)}[(i=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],t=[],s=this.iterator(),r=r=>({next:()=>{if(0===r.length){let r=s.next();e.push(r),t.push(r)}return r.shift()}});return[new td(()=>r(e),this.controller,ej(this,i,"f")),new td(()=>r(t),this.controller,ej(this,i,"f"))]}toReadableStream(){let e,t=this;return e9({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:s,done:r}=await e.next();if(r)return t.close();let n=tt(JSON.stringify(s)+"\n");t.enqueue(n)}catch(e){t.error(e)}},async cancel(){await e.return?.()}})}}async function*tp(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new eW("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new eW("Attempted to iterate over a response with no body")}let s=new tm,r=new tr;for await(let t of tf(e8(e.body)))for(let e of r.decode(t)){let t=s.decode(e);t&&(yield t)}for(let e of r.flush()){let t=s.decode(e);t&&(yield t)}}async function*tf(e){let t=new Uint8Array;for await(let s of e){let e;if(null==s)continue;let r=s instanceof ArrayBuffer?new Uint8Array(s):"string"==typeof s?tt(s):s,n=new Uint8Array(t.length+r.length);for(n.set(t),n.set(r,t.length),t=n;-1!==(e=function(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1]||13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return -1}(t));)yield t.slice(0,e),t=t.slice(e)}t.length>0&&(yield t)}class tm{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){var t;let s;if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,a]=-1!==(s=(t=e).indexOf(":"))?[t.substring(0,s),":",t.substring(s+1)]:[t,"",""];return a.startsWith(" ")&&(a=a.substring(1)),"event"===r?this.event=a:"data"===r&&this.data.push(a),null}}async function tg(e,t){let{response:s,requestLogID:r,retryOfRequestLogID:n,startTime:a}=t,i=await (async()=>{if(t.options.stream)return(tu(e).debug("response",s.status,s.url,s.headers,s.body),t.options.__streamClass)?t.options.__streamClass.fromSSEResponse(s,t.controller):td.fromSSEResponse(s,t.controller);if(204===s.status)return null;if(t.options.__binaryResponse)return s;let r=s.headers.get("content-type"),n=r?.split(";")[0]?.trim();return n?.includes("application/json")||n?.endsWith("+json")?ty(await s.json(),s):await s.text()})();return tu(e).debug(`[${r}] response parsed`,tc({retryOfRequestLogID:n,url:s.url,status:s.status,body:i,durationMs:Date.now()-a})),i}function ty(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("request-id"),enumerable:!1})}class tb extends Promise{constructor(e,t,s=tg){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=s,o.set(this,void 0),eI(this,o,e,"f")}_thenUnwrap(e){return new tb(ej(this,o,"f"),this.responsePromise,async(t,s)=>ty(e(await this.parseResponse(t,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(ej(this,o,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}o=new WeakMap;class tw{constructor(e,t,s,r){l.set(this,void 0),eI(this,l,e,"f"),this.options=r,this.response=t,this.body=s}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new eW("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ej(this,l,"f").requestAPIList(this.constructor,e)}async *iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async *[(l=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}}class t_ extends tb{constructor(e,t,s){super(e,t,async(e,t)=>new s(e,t.response,await tg(e,t),t.options))}async *[Symbol.asyncIterator](){for await(let e of(await this))yield e}}class tv extends tw{constructor(e,t,s,r){super(e,t,s,r),this.data=s.data||[],this.has_more=s.has_more||!1,this.first_id=s.first_id||null,this.last_id=s.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){let e=this.first_id;return e?{...this.options,query:{...e1(this.options.query),before_id:e}}:null}let e=this.last_id;return e?{...this.options,query:{...e1(this.options.query),after_id:e}}:null}}class tk extends tw{constructor(e,t,s,r){super(e,t,s,r),this.data=s.data||[],this.has_more=s.has_more||!1,this.next_page=s.next_page||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){let e=this.next_page;return e?{...this.options,query:{...e1(this.options.query),page:e}}:null}}let tS=()=>{if("undefined"==typeof File){let{process:e}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof e?.versions?.node&&20>parseInt(e.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function tx(e,t,s){return tS(),new File(e,t??"unknown_file",s)}function tR(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}let tE=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],tP=async(e,t)=>({...e,body:await tT(e.body,t)}),tM=new WeakMap,tT=async(e,t)=>{if(!await function(e){let t="function"==typeof e?e:e.fetch,s=tM.get(t);if(s)return s;let r=(async()=>{try{let e="Response"in t?t.Response:(await t("data:,")).constructor,s=new FormData;if(s.toString()===await new e(s).text())return!1;return!0}catch{return!0}})();return tM.set(t,r),r}(t))throw TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let s=new FormData;return await Promise.all(Object.entries(e||{}).map(([e,t])=>t$(s,e,t))),s},tA=e=>e instanceof Blob&&"name"in e,tO=e=>{if("object"==typeof e&&null!==e&&(e instanceof Response||tE(e)||tA(e)))return!0;if(Array.isArray(e))return e.some(tO);if(e&&"object"==typeof e){for(let t in e)if(tO(e[t]))return!0}return!1},t$=async(e,t,s)=>{if(void 0!==s){if(null==s)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof s||"number"==typeof s||"boolean"==typeof s)e.append(t,String(s));else if(s instanceof Response){let r={},n=s.headers.get("Content-Type");n&&(r={type:n}),e.append(t,tx([await s.blob()],tR(s),r))}else if(tE(s))e.append(t,tx([await new Response(e3(s)).blob()],tR(s)));else if(tA(s))e.append(t,tx([s],tR(s),{type:s.type}));else if(Array.isArray(s))await Promise.all(s.map(s=>t$(e,t+"[]",s)));else if("object"==typeof s)await Promise.all(Object.entries(s).map(([s,r])=>t$(e,`${t}[${s}]`,r)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${s} instead`)}},tN=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function tI(e,t,s){let r,n;if(tS(),e=await e,t||(t=tR(e)),null!=(r=e)&&"object"==typeof r&&"string"==typeof r.name&&"number"==typeof r.lastModified&&tN(r))return e instanceof File&&null==t&&null==s?e:tx([await e.arrayBuffer()],t??e.name,{type:e.type,lastModified:e.lastModified,...s});if(null!=(n=e)&&"object"==typeof n&&"string"==typeof n.url&&"function"==typeof n.blob){let r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),tx(await tj(r),t,s)}let a=await tj(e);if(!s?.type){let e=a.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(s={...s,type:e})}return tx(a,t,s)}async function tj(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(tN(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(tE(e))for await(let s of e)t.push(...await tj(s));else{let t=e?.constructor?.name;throw Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";let t=Object.getOwnPropertyNames(e);return`; props: [${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`)}return t}class tq{constructor(e){this._client=e}}let tC=Symbol.for("brand.privateNullableHeaders"),tL=e=>{let t=new Headers,s=new Set;for(let r of e){let e=new Set;for(let[n,a]of function*(e){let t;if(!e)return;if(tC in e){let{values:t,nulls:s}=e;for(let e of(yield*t.entries(),s))yield[e,null];return}let s=!1;for(let r of(e instanceof Headers?t=e.entries():e0(e)?t=e:(s=!0,t=Object.entries(e??{})),t)){let e=r[0];if("string"!=typeof e)throw TypeError("expected header name to be a string");let t=e0(r[1])?r[1]:[r[1]],n=!1;for(let r of t)void 0!==r&&(s&&!n&&(n=!0,yield[e,null]),yield[e,r])}}(r)){let r=n.toLowerCase();e.has(r)||(t.delete(n),e.add(r)),null===a?(t.delete(n),s.add(r)):(t.append(n,a),s.delete(r))}}return{[tC]:!0,values:t,nulls:s}};function tW(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}let tU=Object.freeze(Object.create(null)),tD=((e=tW)=>function(t,...s){let r;if(1===t.length)return t[0];let n=!1,a=[],i=t.reduce((t,r,i)=>{/[?#]/.test(r)&&(n=!0);let o=s[i],l=(n?encodeURIComponent:e)(""+o);return i!==s.length&&(null==o||"object"==typeof o&&o.toString===Object.getPrototypeOf(Object.getPrototypeOf(o.hasOwnProperty??tU)??tU)?.toString)&&(l=o+"",a.push({start:t.length+r.length,length:l.length,error:`Value of type ${Object.prototype.toString.call(o).slice(8,-1)} is not a valid path parameter`})),t+r+(i===s.length?"":l)},""),o=i.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(r=l.exec(o));)a.push({start:r.index,length:r[0].length,error:`Value "${r[0]}" can't be safely passed as a path parameter`});if(a.sort((e,t)=>e.start-t.start),a.length>0){let e=0,t=a.reduce((t,s)=>{let r=" ".repeat(s.start-e),n="^".repeat(s.length);return e=s.start+s.length,t+r+n},"");throw new eW(`Path parameters result in path with invalid segments:
${a.map(e=>e.error).join("\n")}
${i}
${t}`)}return i})(tW);class tF extends tq{list(e={},t){let{betas:s,...r}=e??{};return this._client.getAPIList("/v1/files",tv,{query:r,...t,headers:tL([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},t?.headers])})}delete(e,t={},s){let{betas:r}=t??{};return this._client.delete(tD`/v1/files/${e}`,{...s,headers:tL([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},s?.headers])})}download(e,t={},s){let{betas:r}=t??{};return this._client.get(tD`/v1/files/${e}/content`,{...s,headers:tL([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}retrieveMetadata(e,t={},s){let{betas:r}=t??{};return this._client.get(tD`/v1/files/${e}`,{...s,headers:tL([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},s?.headers])})}upload(e,t){let{betas:s,...r}=e;return this._client.post("/v1/files",tP({body:r,...t,headers:tL([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},t?.headers])},this._client))}}class tH extends tq{retrieve(e,t={},s){let{betas:r}=t??{};return this._client.get(tD`/v1/models/${e}?beta=true`,{...s,headers:tL([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},s?.headers])})}list(e={},t){let{betas:s,...r}=e??{};return this._client.getAPIList("/v1/models?beta=true",tv,{query:r,...t,headers:tL([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers])})}}let tB={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192};function tX(e,t,s){return t&&"parse"in(t.output_format??{})?tK(e,t,s):{...e,content:e.content.map(e=>"text"===e.type?Object.defineProperty(Object.defineProperty({...e},"parsed_output",{value:null,enumerable:!1}),"parsed",{get:()=>(s.logger.warn("The `parsed` property on `text` blocks is deprecated, please use `parsed_output` instead."),null),enumerable:!1}):e),parsed_output:null}}function tK(e,t,s){let r=null,n=e.content.map(e=>{if("text"===e.type){let n=function(e,t){if(e.output_format?.type!=="json_schema")return null;try{if("parse"in e.output_format)return e.output_format.parse(t);return JSON.parse(t)}catch(e){throw new eW(`Failed to parse structured output: ${e}`)}}(t,e.text);return null===r&&(r=n),Object.defineProperty(Object.defineProperty({...e},"parsed_output",{value:n,enumerable:!1}),"parsed",{get:()=>(s.logger.warn("The `parsed` property on `text` blocks is deprecated, please use `parsed_output` instead."),n),enumerable:!1})}return e});return{...e,content:n,parsed_output:r}}let tJ=e=>{if(0===e.length)return e;let t=e[e.length-1];switch(t.type){case"separator":return tJ(e=e.slice(0,e.length-1));case"number":let s=t.value[t.value.length-1];if("."===s||"-"===s)return tJ(e=e.slice(0,e.length-1));case"string":let r=e[e.length-2];if(r?.type==="delimiter"||r?.type==="brace"&&"{"===r.value)return tJ(e=e.slice(0,e.length-1));break;case"delimiter":return tJ(e=e.slice(0,e.length-1))}return e},tV=e=>{var t;let s,r;return JSON.parse((t=tJ((e=>{let t=0,s=[];for(;t<e.length;){let r=e[t];if("\\"===r){t++;continue}if("{"===r){s.push({type:"brace",value:"{"}),t++;continue}if("}"===r){s.push({type:"brace",value:"}"}),t++;continue}if("["===r){s.push({type:"paren",value:"["}),t++;continue}if("]"===r){s.push({type:"paren",value:"]"}),t++;continue}if(":"===r){s.push({type:"separator",value:":"}),t++;continue}if(","===r){s.push({type:"delimiter",value:","}),t++;continue}if('"'===r){let n="",a=!1;for(r=e[++t];'"'!==r;){if(t===e.length){a=!0;break}if("\\"===r){if(++t===e.length){a=!0;break}n+=r+e[t],r=e[++t]}else n+=r,r=e[++t]}r=e[++t],a||s.push({type:"string",value:n});continue}let n=/\s/;if(r&&n.test(r)){t++;continue}let a=/[0-9]/;if(r&&a.test(r)||"-"===r||"."===r){let n="";for("-"===r&&(n+=r,r=e[++t]);r&&a.test(r)||"."===r;)n+=r,r=e[++t];s.push({type:"number",value:n});continue}let i=/[a-z]/i;if(r&&i.test(r)){let n="";for(;r&&i.test(r)&&t!==e.length;)n+=r,r=e[++t];"true"==n||"false"==n||"null"===n?s.push({type:"name",value:n}):t++;continue}t++}return s})(e)),s=[],t.map(e=>{"brace"===e.type&&("{"===e.value?s.push("}"):s.splice(s.lastIndexOf("}"),1)),"paren"===e.type&&("["===e.value?s.push("]"):s.splice(s.lastIndexOf("]"),1))}),s.length>0&&s.reverse().map(e=>{"}"===e?t.push({type:"brace",value:"}"}):"]"===e&&t.push({type:"paren",value:"]"})}),r="",t.map(e=>{"string"===e.type?r+='"'+e.value+'"':r+=e.value}),r))},tz="__json_buf";function tY(e){return"tool_use"===e.type||"server_tool_use"===e.type||"mcp_tool_use"===e.type}class tG{constructor(e,t){h.add(this),this.messages=[],this.receivedMessages=[],u.set(this,void 0),c.set(this,null),this.controller=new AbortController,d.set(this,void 0),p.set(this,()=>{}),f.set(this,()=>{}),m.set(this,void 0),g.set(this,()=>{}),y.set(this,()=>{}),b.set(this,{}),w.set(this,!1),_.set(this,!1),v.set(this,!1),k.set(this,!1),S.set(this,void 0),x.set(this,void 0),R.set(this,void 0),M.set(this,e=>{if(eI(this,_,!0,"f"),eC(e)&&(e=new eD),e instanceof eD)return eI(this,v,!0,"f"),this._emit("abort",e);if(e instanceof eW)return this._emit("error",e);if(e instanceof Error){let t=new eW(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new eW(String(e)))}),eI(this,d,new Promise((e,t)=>{eI(this,p,e,"f"),eI(this,f,t,"f")}),"f"),eI(this,m,new Promise((e,t)=>{eI(this,g,e,"f"),eI(this,y,t,"f")}),"f"),ej(this,d,"f").catch(()=>{}),ej(this,m,"f").catch(()=>{}),eI(this,c,e,"f"),eI(this,R,t?.logger??console,"f")}get response(){return ej(this,S,"f")}get request_id(){return ej(this,x,"f")}async withResponse(){let e=await ej(this,d,"f");if(!e)throw Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let t=new tG(null);return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,s,{logger:r}={}){let n=new tG(t,{logger:r});for(let e of t.messages)n._addMessageParam(e);return eI(n,c,{...t,stream:!0},"f"),n._run(()=>n._createMessage(e,{...t,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),n}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},ej(this,M,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,s){let r,n=s?.signal;n&&(n.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),n.addEventListener("abort",r));try{ej(this,h,"m",T).call(this);let{response:r,data:n}=await e.create({...t,stream:!0},{...s,signal:this.controller.signal}).withResponse();for await(let e of(this._connected(r),n))ej(this,h,"m",A).call(this,e);if(n.controller.signal?.aborted)throw new eD;ej(this,h,"m",O).call(this)}finally{n&&r&&n.removeEventListener("abort",r)}}_connected(e){this.ended||(eI(this,S,e,"f"),eI(this,x,e?.headers.get("request-id"),"f"),ej(this,p,"f").call(this,e),this._emit("connect"))}get ended(){return ej(this,w,"f")}get errored(){return ej(this,_,"f")}get aborted(){return ej(this,v,"f")}abort(){this.controller.abort()}on(e,t){return(ej(this,b,"f")[e]||(ej(this,b,"f")[e]=[])).push({listener:t}),this}off(e,t){let s=ej(this,b,"f")[e];if(!s)return this;let r=s.findIndex(e=>e.listener===t);return r>=0&&s.splice(r,1),this}once(e,t){return(ej(this,b,"f")[e]||(ej(this,b,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{eI(this,k,!0,"f"),"error"!==e&&this.once("error",s),this.once(e,t)})}async done(){eI(this,k,!0,"f"),await ej(this,m,"f")}get currentMessage(){return ej(this,u,"f")}async finalMessage(){return await this.done(),ej(this,h,"m",E).call(this)}async finalText(){return await this.done(),ej(this,h,"m",P).call(this)}_emit(e,...t){if(ej(this,w,"f"))return;"end"===e&&(eI(this,w,!0,"f"),ej(this,g,"f").call(this));let s=ej(this,b,"f")[e];if(s&&(ej(this,b,"f")[e]=s.filter(e=>!e.once),s.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];ej(this,k,"f")||s?.length||Promise.reject(e),ej(this,f,"f").call(this,e),ej(this,y,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];ej(this,k,"f")||s?.length||Promise.reject(e),ej(this,f,"f").call(this,e),ej(this,y,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",ej(this,h,"m",E).call(this))}async _fromReadableStream(e,t){let s,r=t?.signal;r&&(r.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),r.addEventListener("abort",s));try{ej(this,h,"m",T).call(this),this._connected(null);let t=td.fromReadableStream(e,this.controller);for await(let e of t)ej(this,h,"m",A).call(this,e);if(t.controller.signal?.aborted)throw new eD;ej(this,h,"m",O).call(this)}finally{r&&s&&r.removeEventListener("abort",s)}}[(u=new WeakMap,c=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,_=new WeakMap,v=new WeakMap,k=new WeakMap,S=new WeakMap,x=new WeakMap,R=new WeakMap,M=new WeakMap,h=new WeakSet,E=function(){if(0===this.receivedMessages.length)throw new eW("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},P=function(){if(0===this.receivedMessages.length)throw new eW("stream ended without producing a Message with role=assistant");let e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new eW("stream ended without producing a content block with type=text");return e.join(" ")},T=function(){this.ended||eI(this,u,void 0,"f")},A=function(e){if(this.ended)return;let t=ej(this,h,"m",$).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{let s=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===s.type&&this._emit("text",e.delta.text,s.text||"");break;case"citations_delta":"text"===s.type&&this._emit("citation",e.delta.citation,s.citations??[]);break;case"input_json_delta":tY(s)&&s.input&&this._emit("inputJson",e.delta.partial_json,s.input);break;case"thinking_delta":"thinking"===s.type&&this._emit("thinking",e.delta.thinking,s.thinking);break;case"signature_delta":"thinking"===s.type&&this._emit("signature",s.signature);break;default:tQ(e.delta)}break}case"message_stop":this._addMessageParam(t),this._addMessage(tX(t,ej(this,c,"f"),{logger:ej(this,R,"f")}),!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":eI(this,u,t,"f")}},O=function(){if(this.ended)throw new eW("stream has ended, this shouldn't happen");let e=ej(this,u,"f");if(!e)throw new eW("request ended without sending any chunks");return eI(this,u,void 0,"f"),tX(e,ej(this,c,"f"),{logger:ej(this,R,"f")})},$=function(e){let t=ej(this,u,"f");if("message_start"===e.type){if(t)throw new eW(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new eW(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.container=e.delta.container,t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,t.context_management=e.context_management,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push(e.content_block),t;case"content_block_delta":{let s=t.content.at(e.index);switch(e.delta.type){case"text_delta":s?.type==="text"&&(t.content[e.index]={...s,text:(s.text||"")+e.delta.text});break;case"citations_delta":s?.type==="text"&&(t.content[e.index]={...s,citations:[...s.citations??[],e.delta.citation]});break;case"input_json_delta":if(s&&tY(s)){let r=s[tz]||"";r+=e.delta.partial_json;let n={...s};if(Object.defineProperty(n,tz,{value:r,enumerable:!1,writable:!0}),r)try{n.input=tV(r)}catch(t){let e=new eW(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${t}. JSON: ${r}`);ej(this,M,"f").call(this,e)}t.content[e.index]=n}break;case"thinking_delta":s?.type==="thinking"&&(t.content[e.index]={...s,thinking:s.thinking+e.delta.thinking});break;case"signature_delta":s?.type==="thinking"&&(t.content[e.index]={...s,signature:e.delta.signature});break;default:tQ(e.delta)}return t}}},Symbol.asyncIterator)](){let e=[],t=[],s=!1;return this.on("streamEvent",s=>{let r=t.shift();r?r.resolve(s):e.push(s)}),this.on("end",()=>{for(let e of(s=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let r of(s=!0,t))r.reject(e);t.length=0}),this.on("error",e=>{for(let r of(s=!0,t))r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((e,s)=>t.push({resolve:e,reject:s})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new td(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function tQ(e){}let tZ=`You have been working on the task described above but have not yet completed it. Write a continuation summary that will allow you (or another instance of yourself) to resume work efficiently in a future context window where the conversation history will be replaced with this summary. Your summary should be structured, concise, and actionable. Include:
1. Task Overview
The user's core request and success criteria
Any clarifications or constraints they specified
2. Current State
What has been completed so far
Files created, modified, or analyzed (with paths if relevant)
Key outputs or artifacts produced
3. Important Discoveries
Technical constraints or requirements uncovered
Decisions made and their rationale
Errors encountered and how they were resolved
What approaches were tried that didn't work (and why)
4. Next Steps
Specific actions needed to complete the task
Any blockers or open questions to resolve
Priority order if multiple steps remain
5. Context to Preserve
User preferences or style requirements
Domain-specific details that aren't obvious
Any promises made to the user
Be concise but completeâ€”err on the side of including information that would prevent duplicate work or repeated mistakes. Write in a way that enables immediate resumption of the task.
Wrap your summary in <summary></summary> tags.`;function t0(){let e,t;return{promise:new Promise((s,r)=>{e=s,t=r}),resolve:e,reject:t}}class t1{constructor(e,t,s){N.add(this),this.client=e,I.set(this,!1),j.set(this,!1),q.set(this,void 0),C.set(this,void 0),L.set(this,void 0),W.set(this,void 0),U.set(this,void 0),D.set(this,0),eI(this,q,{params:{...t,messages:structuredClone(t.messages)}},"f"),eI(this,C,{...s,headers:tL([{"x-stainless-helper":"BetaToolRunner"},s?.headers])},"f"),eI(this,U,t0(),"f")}async *[(I=new WeakMap,j=new WeakMap,q=new WeakMap,C=new WeakMap,L=new WeakMap,W=new WeakMap,U=new WeakMap,D=new WeakMap,N=new WeakSet,F=async function(){let e=ej(this,q,"f").params.compactionControl;if(!e||!e.enabled)return!1;let t=0;if(void 0!==ej(this,L,"f"))try{let e=await ej(this,L,"f");t=e.usage.input_tokens+(e.usage.cache_creation_input_tokens??0)+(e.usage.cache_read_input_tokens??0)+e.usage.output_tokens}catch{return!1}if(t<(e.contextTokenThreshold??1e5))return!1;let s=e.model??ej(this,q,"f").params.model,r=e.summaryPrompt??tZ,n=ej(this,q,"f").params.messages;if("assistant"===n[n.length-1].role){let e=n[n.length-1];if(Array.isArray(e.content)){let t=e.content.filter(e=>"tool_use"!==e.type);0===t.length?n.pop():e.content=t}}let a=await this.client.beta.messages.create({model:s,messages:[...n,{role:"user",content:[{type:"text",text:r}]}],max_tokens:ej(this,q,"f").params.max_tokens},{headers:{"x-stainless-helper":"compaction"}});if(a.content[0]?.type!=="text")throw new eW("Expected text response for compaction");return ej(this,q,"f").params.messages=[{role:"user",content:a.content}],!0},Symbol.asyncIterator)](){var e;if(ej(this,I,"f"))throw new eW("Cannot iterate over a consumed stream");eI(this,I,!0,"f"),eI(this,j,!0,"f"),eI(this,W,void 0,"f");try{for(;;){let t;try{if(ej(this,q,"f").params.max_iterations&&ej(this,D,"f")>=ej(this,q,"f").params.max_iterations)break;eI(this,j,!1,"f"),eI(this,W,void 0,"f"),eI(this,D,(e=ej(this,D,"f"),++e),"f"),eI(this,L,void 0,"f");let{max_iterations:s,compactionControl:r,...n}=ej(this,q,"f").params;if(n.stream?(t=this.client.beta.messages.stream({...n},ej(this,C,"f")),eI(this,L,t.finalMessage(),"f"),ej(this,L,"f").catch(()=>{}),yield t):(eI(this,L,this.client.beta.messages.create({...n,stream:!1},ej(this,C,"f")),"f"),yield ej(this,L,"f")),!await ej(this,N,"m",F).call(this)){if(!ej(this,j,"f")){let{role:e,content:t}=await ej(this,L,"f");ej(this,q,"f").params.messages.push({role:e,content:t})}let e=await ej(this,N,"m",H).call(this,ej(this,q,"f").params.messages.at(-1));if(e)ej(this,q,"f").params.messages.push(e);else if(!ej(this,j,"f"))break}}finally{t&&t.abort()}}if(!ej(this,L,"f"))throw new eW("ToolRunner concluded without a message from the server");ej(this,U,"f").resolve(await ej(this,L,"f"))}catch(e){throw eI(this,I,!1,"f"),ej(this,U,"f").promise.catch(()=>{}),ej(this,U,"f").reject(e),eI(this,U,t0(),"f"),e}}setMessagesParams(e){"function"==typeof e?ej(this,q,"f").params=e(ej(this,q,"f").params):ej(this,q,"f").params=e,eI(this,j,!0,"f"),eI(this,W,void 0,"f")}async generateToolResponse(){let e=await ej(this,L,"f")??this.params.messages.at(-1);return e?ej(this,N,"m",H).call(this,e):null}done(){return ej(this,U,"f").promise}async runUntilDone(){if(!ej(this,I,"f"))for await(let e of this);return this.done()}get params(){return ej(this,q,"f").params}pushMessages(...e){this.setMessagesParams(t=>({...t,messages:[...t.messages,...e]}))}then(e,t){return this.runUntilDone().then(e,t)}}async function t2(e,t=e.messages.at(-1)){if(!t||"assistant"!==t.role||!t.content||"string"==typeof t.content)return null;let s=t.content.filter(e=>"tool_use"===e.type);return 0===s.length?null:{role:"user",content:await Promise.all(s.map(async t=>{let s=e.tools.find(e=>("name"in e?e.name:e.mcp_server_name)===t.name);if(!s||!("run"in s))return{type:"tool_result",tool_use_id:t.id,content:`Error: Tool '${t.name}' not found`,is_error:!0};try{let e=t.input;"parse"in s&&s.parse&&(e=s.parse(e));let r=await s.run(e);return{type:"tool_result",tool_use_id:t.id,content:r}}catch(e){return{type:"tool_result",tool_use_id:t.id,content:`Error: ${e instanceof Error?e.message:String(e)}`,is_error:!0}}}))}}H=async function(e){return void 0!==ej(this,W,"f")||eI(this,W,t2(ej(this,q,"f").params,e),"f"),ej(this,W,"f")};class t4{constructor(e,t){this.iterator=e,this.controller=t}async *decoder(){let e=new tr;for await(let t of this.iterator)for(let s of e.decode(t))yield JSON.parse(s);for(let t of e.flush())yield JSON.parse(t)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new eW("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new eW("Attempted to iterate over a response with no body")}return new t4(e8(e.body),t)}}class t5 extends tq{create(e,t){let{betas:s,...r}=e;return this._client.post("/v1/messages/batches?beta=true",{body:r,...t,headers:tL([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},t?.headers])})}retrieve(e,t={},s){let{betas:r}=t??{};return this._client.get(tD`/v1/messages/batches/${e}?beta=true`,{...s,headers:tL([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},s?.headers])})}list(e={},t){let{betas:s,...r}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",tv,{query:r,...t,headers:tL([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},t?.headers])})}delete(e,t={},s){let{betas:r}=t??{};return this._client.delete(tD`/v1/messages/batches/${e}?beta=true`,{...s,headers:tL([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},s?.headers])})}cancel(e,t={},s){let{betas:r}=t??{};return this._client.post(tD`/v1/messages/batches/${e}/cancel?beta=true`,{...s,headers:tL([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},s?.headers])})}async results(e,t={},s){let r=await this.retrieve(e);if(!r.results_url)throw new eW(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);let{betas:n}=t??{};return this._client.get(r.results_url,{...s,headers:tL([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},s?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>t4.fromResponse(t.response,t.controller))}}let t6={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};class t9 extends tq{constructor(){super(...arguments),this.batches=new t5(this._client)}create(e,t){let{betas:s,...r}=e;r.model in t6&&console.warn(`The model '${r.model}' is deprecated and will reach end-of-life on ${t6[r.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let n=this._client._options.timeout;if(!r.stream&&null==n){let e=tB[r.model]??void 0;n=this._client.calculateNonstreamingTimeout(r.max_tokens,e)}return this._client.post("/v1/messages?beta=true",{body:r,timeout:n??6e5,...t,headers:tL([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}parse(e,t){return t={...t,headers:tL([{"anthropic-beta":[...e.betas??[],"structured-outputs-2025-11-13"].toString()},t?.headers])},this.create(e,t).then(t=>tK(t,e,{logger:this._client.logger??console}))}stream(e,t){return tG.createMessage(this,e,t)}countTokens(e,t){let{betas:s,...r}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:r,...t,headers:tL([{"anthropic-beta":[...s??[],"token-counting-2024-11-01"].toString()},t?.headers])})}toolRunner(e,t){return new t1(this._client,e,t)}}t9.Batches=t5,t9.BetaToolRunner=t1;class t3 extends tq{create(e,t={},s){let{betas:r,...n}=t??{};return this._client.post(tD`/v1/skills/${e}/versions?beta=true`,tP({body:n,...s,headers:tL([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},s?.headers])},this._client))}retrieve(e,t,s){let{skill_id:r,betas:n}=t;return this._client.get(tD`/v1/skills/${r}/versions/${e}?beta=true`,{...s,headers:tL([{"anthropic-beta":[...n??[],"skills-2025-10-02"].toString()},s?.headers])})}list(e,t={},s){let{betas:r,...n}=t??{};return this._client.getAPIList(tD`/v1/skills/${e}/versions?beta=true`,tk,{query:n,...s,headers:tL([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},s?.headers])})}delete(e,t,s){let{skill_id:r,betas:n}=t;return this._client.delete(tD`/v1/skills/${r}/versions/${e}?beta=true`,{...s,headers:tL([{"anthropic-beta":[...n??[],"skills-2025-10-02"].toString()},s?.headers])})}}class t8 extends tq{constructor(){super(...arguments),this.versions=new t3(this._client)}create(e={},t){let{betas:s,...r}=e??{};return this._client.post("/v1/skills?beta=true",tP({body:r,...t,headers:tL([{"anthropic-beta":[...s??[],"skills-2025-10-02"].toString()},t?.headers])},this._client))}retrieve(e,t={},s){let{betas:r}=t??{};return this._client.get(tD`/v1/skills/${e}?beta=true`,{...s,headers:tL([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},s?.headers])})}list(e={},t){let{betas:s,...r}=e??{};return this._client.getAPIList("/v1/skills?beta=true",tk,{query:r,...t,headers:tL([{"anthropic-beta":[...s??[],"skills-2025-10-02"].toString()},t?.headers])})}delete(e,t={},s){let{betas:r}=t??{};return this._client.delete(tD`/v1/skills/${e}?beta=true`,{...s,headers:tL([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},s?.headers])})}}t8.Versions=t3;class t7 extends tq{constructor(){super(...arguments),this.models=new tH(this._client),this.messages=new t9(this._client),this.files=new tF(this._client),this.skills=new t8(this._client)}}t7.Models=tH,t7.Messages=t9,t7.Files=tF,t7.Skills=t8;class se extends tq{create(e,t){let{betas:s,...r}=e;return this._client.post("/v1/complete",{body:r,timeout:this._client._options.timeout??6e5,...t,headers:tL([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}}let st="__json_buf";function ss(e){return"tool_use"===e.type||"server_tool_use"===e.type}class sr{constructor(){B.add(this),this.messages=[],this.receivedMessages=[],X.set(this,void 0),this.controller=new AbortController,K.set(this,void 0),J.set(this,()=>{}),V.set(this,()=>{}),z.set(this,void 0),Y.set(this,()=>{}),G.set(this,()=>{}),Q.set(this,{}),Z.set(this,!1),ee.set(this,!1),et.set(this,!1),es.set(this,!1),er.set(this,void 0),en.set(this,void 0),eo.set(this,e=>{if(eI(this,ee,!0,"f"),eC(e)&&(e=new eD),e instanceof eD)return eI(this,et,!0,"f"),this._emit("abort",e);if(e instanceof eW)return this._emit("error",e);if(e instanceof Error){let t=new eW(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new eW(String(e)))}),eI(this,K,new Promise((e,t)=>{eI(this,J,e,"f"),eI(this,V,t,"f")}),"f"),eI(this,z,new Promise((e,t)=>{eI(this,Y,e,"f"),eI(this,G,t,"f")}),"f"),ej(this,K,"f").catch(()=>{}),ej(this,z,"f").catch(()=>{})}get response(){return ej(this,er,"f")}get request_id(){return ej(this,en,"f")}async withResponse(){let e=await ej(this,K,"f");if(!e)throw Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let t=new sr;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,s){let r=new sr;for(let e of t.messages)r._addMessageParam(e);return r._run(()=>r._createMessage(e,{...t,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},ej(this,eo,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,s){let r,n=s?.signal;n&&(n.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),n.addEventListener("abort",r));try{ej(this,B,"m",el).call(this);let{response:r,data:n}=await e.create({...t,stream:!0},{...s,signal:this.controller.signal}).withResponse();for await(let e of(this._connected(r),n))ej(this,B,"m",eh).call(this,e);if(n.controller.signal?.aborted)throw new eD;ej(this,B,"m",eu).call(this)}finally{n&&r&&n.removeEventListener("abort",r)}}_connected(e){this.ended||(eI(this,er,e,"f"),eI(this,en,e?.headers.get("request-id"),"f"),ej(this,J,"f").call(this,e),this._emit("connect"))}get ended(){return ej(this,Z,"f")}get errored(){return ej(this,ee,"f")}get aborted(){return ej(this,et,"f")}abort(){this.controller.abort()}on(e,t){return(ej(this,Q,"f")[e]||(ej(this,Q,"f")[e]=[])).push({listener:t}),this}off(e,t){let s=ej(this,Q,"f")[e];if(!s)return this;let r=s.findIndex(e=>e.listener===t);return r>=0&&s.splice(r,1),this}once(e,t){return(ej(this,Q,"f")[e]||(ej(this,Q,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{eI(this,es,!0,"f"),"error"!==e&&this.once("error",s),this.once(e,t)})}async done(){eI(this,es,!0,"f"),await ej(this,z,"f")}get currentMessage(){return ej(this,X,"f")}async finalMessage(){return await this.done(),ej(this,B,"m",ea).call(this)}async finalText(){return await this.done(),ej(this,B,"m",ei).call(this)}_emit(e,...t){if(ej(this,Z,"f"))return;"end"===e&&(eI(this,Z,!0,"f"),ej(this,Y,"f").call(this));let s=ej(this,Q,"f")[e];if(s&&(ej(this,Q,"f")[e]=s.filter(e=>!e.once),s.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];ej(this,es,"f")||s?.length||Promise.reject(e),ej(this,V,"f").call(this,e),ej(this,G,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];ej(this,es,"f")||s?.length||Promise.reject(e),ej(this,V,"f").call(this,e),ej(this,G,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",ej(this,B,"m",ea).call(this))}async _fromReadableStream(e,t){let s,r=t?.signal;r&&(r.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),r.addEventListener("abort",s));try{ej(this,B,"m",el).call(this),this._connected(null);let t=td.fromReadableStream(e,this.controller);for await(let e of t)ej(this,B,"m",eh).call(this,e);if(t.controller.signal?.aborted)throw new eD;ej(this,B,"m",eu).call(this)}finally{r&&s&&r.removeEventListener("abort",s)}}[(X=new WeakMap,K=new WeakMap,J=new WeakMap,V=new WeakMap,z=new WeakMap,Y=new WeakMap,G=new WeakMap,Q=new WeakMap,Z=new WeakMap,ee=new WeakMap,et=new WeakMap,es=new WeakMap,er=new WeakMap,en=new WeakMap,eo=new WeakMap,B=new WeakSet,ea=function(){if(0===this.receivedMessages.length)throw new eW("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},ei=function(){if(0===this.receivedMessages.length)throw new eW("stream ended without producing a Message with role=assistant");let e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new eW("stream ended without producing a content block with type=text");return e.join(" ")},el=function(){this.ended||eI(this,X,void 0,"f")},eh=function(e){if(this.ended)return;let t=ej(this,B,"m",ec).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{let s=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===s.type&&this._emit("text",e.delta.text,s.text||"");break;case"citations_delta":"text"===s.type&&this._emit("citation",e.delta.citation,s.citations??[]);break;case"input_json_delta":ss(s)&&s.input&&this._emit("inputJson",e.delta.partial_json,s.input);break;case"thinking_delta":"thinking"===s.type&&this._emit("thinking",e.delta.thinking,s.thinking);break;case"signature_delta":"thinking"===s.type&&this._emit("signature",s.signature);break;default:sn(e.delta)}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":eI(this,X,t,"f")}},eu=function(){if(this.ended)throw new eW("stream has ended, this shouldn't happen");let e=ej(this,X,"f");if(!e)throw new eW("request ended without sending any chunks");return eI(this,X,void 0,"f"),e},ec=function(e){let t=ej(this,X,"f");if("message_start"===e.type){if(t)throw new eW(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new eW(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push({...e.content_block}),t;case"content_block_delta":{let s=t.content.at(e.index);switch(e.delta.type){case"text_delta":s?.type==="text"&&(t.content[e.index]={...s,text:(s.text||"")+e.delta.text});break;case"citations_delta":s?.type==="text"&&(t.content[e.index]={...s,citations:[...s.citations??[],e.delta.citation]});break;case"input_json_delta":if(s&&ss(s)){let r=s[st]||"";r+=e.delta.partial_json;let n={...s};Object.defineProperty(n,st,{value:r,enumerable:!1,writable:!0}),r&&(n.input=tV(r)),t.content[e.index]=n}break;case"thinking_delta":s?.type==="thinking"&&(t.content[e.index]={...s,thinking:s.thinking+e.delta.thinking});break;case"signature_delta":s?.type==="thinking"&&(t.content[e.index]={...s,signature:e.delta.signature});break;default:sn(e.delta)}return t}}},Symbol.asyncIterator)](){let e=[],t=[],s=!1;return this.on("streamEvent",s=>{let r=t.shift();r?r.resolve(s):e.push(s)}),this.on("end",()=>{for(let e of(s=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let r of(s=!0,t))r.reject(e);t.length=0}),this.on("error",e=>{for(let r of(s=!0,t))r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((e,s)=>t.push({resolve:e,reject:s})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new td(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function sn(e){}class sa extends tq{create(e,t){return this._client.post("/v1/messages/batches",{body:e,...t})}retrieve(e,t){return this._client.get(tD`/v1/messages/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/v1/messages/batches",tv,{query:e,...t})}delete(e,t){return this._client.delete(tD`/v1/messages/batches/${e}`,t)}cancel(e,t){return this._client.post(tD`/v1/messages/batches/${e}/cancel`,t)}async results(e,t){let s=await this.retrieve(e);if(!s.results_url)throw new eW(`No batch \`results_url\`; Has it finished processing? ${s.processing_status} - ${s.id}`);return this._client.get(s.results_url,{...t,headers:tL([{Accept:"application/binary"},t?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>t4.fromResponse(t.response,t.controller))}}class si extends tq{constructor(){super(...arguments),this.batches=new sa(this._client)}create(e,t){e.model in so&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${so[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let s=this._client._options.timeout;if(!e.stream&&null==s){let t=tB[e.model]??void 0;s=this._client.calculateNonstreamingTimeout(e.max_tokens,t)}return this._client.post("/v1/messages",{body:e,timeout:s??6e5,...t,stream:e.stream??!1})}stream(e,t){return sr.createMessage(this,e,t)}countTokens(e,t){return this._client.post("/v1/messages/count_tokens",{body:e,...t})}}let so={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};si.Batches=sa;class sl extends tq{retrieve(e,t={},s){let{betas:r}=t??{};return this._client.get(tD`/v1/models/${e}`,{...s,headers:tL([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},s?.headers])})}list(e={},t){let{betas:s,...r}=e??{};return this._client.getAPIList("/v1/models",tv,{query:r,...t,headers:tL([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers])})}}let sh=e=>void 0!==globalThis.process?globalThis.process.env?.[e]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(e)?.trim():void 0;class su{constructor({baseURL:e=sh("ANTHROPIC_BASE_URL"),apiKey:t=sh("ANTHROPIC_API_KEY")??null,authToken:s=sh("ANTHROPIC_AUTH_TOKEN")??null,...r}={}){ed.add(this),ef.set(this,void 0);const n={apiKey:t,authToken:s,...r,baseURL:e||"https://api.anthropic.com"};n.dangerouslyAllowBrowser,this.baseURL=n.baseURL,this.timeout=n.timeout??ep.DEFAULT_TIMEOUT,this.logger=n.logger??console;const a="warn";this.logLevel=a,this.logLevel=ta(n.logLevel,"ClientOptions.logLevel",this)??ta(sh("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??a,this.fetchOptions=n.fetchOptions,this.maxRetries=n.maxRetries??2,this.fetch=n.fetch??function(){if("undefined"!=typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),eI(this,ef,te,"f"),this._options=n,this.apiKey="string"==typeof t?t:null,this.authToken=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.get("x-api-key")||e.get("authorization")||this.apiKey&&e.get("x-api-key")||t.has("x-api-key")||this.authToken&&e.get("authorization"))&&!t.has("authorization"))throw Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return tL([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(null!=this.apiKey)return tL([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(null!=this.authToken)return tL([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new eW(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${e4}`}defaultIdempotencyKey(){return`stainless-node-retry-${eq()}`}makeStatusError(e,t,s,r){return eU.generate(e,t,s,r)}buildURL(e,t,s){let r=!ej(this,ed,"m",em).call(this)&&s||this.baseURL,n=new URL(eQ.test(e)?e:r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return!function(e){if(!e)return!0;for(let t in e)return!1;return!0}(a)&&(t={...a,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new eW("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 6e5}async prepareOptions(e){}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(s=>({method:e,path:t,...s})))}request(e,t=null){return new tb(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){let r=await e,n=r.maxRetries??this.maxRetries;null==t&&(t=n),await this.prepareOptions(r);let{req:a,url:i,timeout:o}=await this.buildRequest(r,{retryCount:n-t});await this.prepareRequest(a,{url:i,options:r});let l="log_"+(0x1000000*Math.random()|0).toString(16).padStart(6,"0"),h=void 0===s?"":`, retryOf: ${s}`,u=Date.now();if(tu(this).debug(`[${l}] sending request`,tc({retryOfRequestLogID:s,method:r.method,url:i,options:r,headers:a.headers})),r.signal?.aborted)throw new eD;let c=new AbortController,d=await this.fetchWithTimeout(i,a,o,c).catch(eL),p=Date.now();if(d instanceof globalThis.Error){let e=`retrying, ${t} attempts remaining`;if(r.signal?.aborted)throw new eD;let n=eC(d)||/timed? ?out/i.test(String(d)+("cause"in d?String(d.cause):""));if(t)return tu(this).info(`[${l}] connection ${n?"timed out":"failed"} - ${e}`),tu(this).debug(`[${l}] connection ${n?"timed out":"failed"} (${e})`,tc({retryOfRequestLogID:s,url:i,durationMs:p-u,message:d.message})),this.retryRequest(r,t,s??l);if(tu(this).info(`[${l}] connection ${n?"timed out":"failed"} - error; no more retries left`),tu(this).debug(`[${l}] connection ${n?"timed out":"failed"} (error; no more retries left)`,tc({retryOfRequestLogID:s,url:i,durationMs:p-u,message:d.message})),n)throw new eH;throw new eF({cause:d})}let f=[...d.headers.entries()].filter(([e])=>"request-id"===e).map(([e,t])=>", "+e+": "+JSON.stringify(t)).join(""),m=`[${l}${h}${f}] ${a.method} ${i} ${d.ok?"succeeded":"failed"} with status ${d.status} in ${p-u}ms`;if(!d.ok){let e=await this.shouldRetry(d);if(t&&e){let e=`retrying, ${t} attempts remaining`;return await e7(d.body),tu(this).info(`${m} - ${e}`),tu(this).debug(`[${l}] response error (${e})`,tc({retryOfRequestLogID:s,url:d.url,status:d.status,headers:d.headers,durationMs:p-u})),this.retryRequest(r,t,s??l,d.headers)}let n=e?"error; no more retries left":"error; not retryable";tu(this).info(`${m} - ${n}`);let a=await d.text().catch(e=>eL(e).message),i=e2(a),o=i?void 0:a;throw tu(this).debug(`[${l}] response error (${n})`,tc({retryOfRequestLogID:s,url:d.url,status:d.status,headers:d.headers,message:o,durationMs:Date.now()-u})),this.makeStatusError(d.status,i,o,d.headers)}return tu(this).info(m),tu(this).debug(`[${l}] response start`,tc({retryOfRequestLogID:s,url:d.url,status:d.status,headers:d.headers,durationMs:p-u})),{response:d,options:r,controller:c,requestLogID:l,retryOfRequestLogID:s,startTime:u}}getAPIList(e,t,s){return this.requestAPIList(t,{method:"get",path:e,...s})}requestAPIList(e,t){return new t_(this,this.makeRequest(t,null,void 0),e)}async fetchWithTimeout(e,t,s,r){let{signal:n,method:a,...i}=t||{};n&&n.addEventListener("abort",()=>r.abort());let o=setTimeout(()=>r.abort(),s),l=globalThis.ReadableStream&&i.body instanceof globalThis.ReadableStream||"object"==typeof i.body&&null!==i.body&&Symbol.asyncIterator in i.body,h={signal:r.signal,...l?{duplex:"half"}:{},method:"GET",...i};a&&(h.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(o)}}async shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||!!(e.status>=500))}async retryRequest(e,t,s,r){let n,a,i=r?.get("retry-after-ms");if(i){let e=parseFloat(i);Number.isNaN(e)||(n=e)}let o=r?.get("retry-after");if(o&&!n){let e=parseFloat(o);n=Number.isNaN(e)?Date.parse(o)-Date.now():1e3*e}if(!(n&&0<=n&&n<6e4)){let s=e.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(t,s)}return await (a=n,new Promise(e=>setTimeout(e,a))),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}calculateNonstreamingTimeout(e,t){if(36e5*e/128e3>6e5||null!=t&&e>t)throw new eW("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}async buildRequest(e,{retryCount:t=0}={}){let s={...e},{method:r,path:n,query:a,defaultBaseURL:i}=s,o=this.buildURL(n,a,i);"timeout"in s&&((e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new eW(`${e} must be an integer`);if(t<0)throw new eW(`${e} must be a positive integer`)})("timeout",s.timeout),s.timeout=s.timeout??this.timeout;let{bodyHeaders:l,body:h}=this.buildBody({options:s}),u=await this.buildHeaders({options:e,method:r,bodyHeaders:l,retryCount:t});return{req:{method:r,headers:u,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&h instanceof globalThis.ReadableStream&&{duplex:"half"},...h&&{body:h},...this.fetchOptions??{},...s.fetchOptions??{}},url:o,timeout:s.timeout}}async buildHeaders({options:e,method:s,bodyHeaders:r,retryCount:n}){let a={};this.idempotencyHeader&&"get"!==s&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);let i=tL([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(n),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...t??(t=(()=>{let e="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":e6(Deno.build.os),"X-Stainless-Arch":e5(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":e6(globalThis.process.platform??"unknown"),"X-Stainless-Arch":e5(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let t=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:e,pattern:t}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let s=t.exec(navigator.userAgent);if(s){let t=s[1]||0,r=s[2]||0,n=s[3]||0;return{browser:e,version:`${t}.${r}.${n}`}}}return null}();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};let s=tL([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:e3(e)}:ej(this,ef,"f").call(this,{body:e,headers:s})}}ep=su,ef=new WeakMap,ed=new WeakSet,em=function(){return"https://api.anthropic.com"!==this.baseURL},su.Anthropic=ep,su.HUMAN_PROMPT="\\n\\nHuman:",su.AI_PROMPT="\\n\\nAssistant:",su.DEFAULT_TIMEOUT=6e5,su.AnthropicError=eW,su.APIError=eU,su.APIConnectionError=eF,su.APIConnectionTimeoutError=eH,su.APIUserAbortError=eD,su.NotFoundError=eJ,su.ConflictError=eV,su.RateLimitError=eY,su.BadRequestError=eB,su.AuthenticationError=eX,su.InternalServerError=eG,su.PermissionDeniedError=eK,su.UnprocessableEntityError=ez,su.toFile=tI;class sc extends su{constructor(){super(...arguments),this.completions=new se(this),this.messages=new si(this),this.models=new sl(this),this.beta=new t7(this)}}sc.Completions=se,sc.Messages=si,sc.Models=sl,sc.Beta=t7;var sd=e.i(89171);let sp=new sc,sf=`You are AquaBuddy, the friendly water drop mascot for Cunningham Pure Water LLC - Louisiana's authorized Wellsys dealer. You're an adorable, enthusiastic water droplet character with a big personality!

Your personality:
- Bubbly, cheerful, and energetic (like a refreshing splash of water!)
- Knowledgeable but not pushy - you genuinely want to help people understand the benefits of pure water
- Use water-related puns and expressions naturally (but don't overdo it)
- Friendly and approachable, like talking to a helpful friend

Key information you should share:

ABOUT WELLSYS PRODUCTS:
- Bottleless water coolers with 5-6 stage reverse osmosis filtration
- Free-standing and countertop models available
- Hot, cold, and ambient water options
- Commercial-grade ice machines (up to 165 lbs/day)
- Touchless dispensing options available
- Energy efficient, sleek modern designs

REVERSE OSMOSIS BENEFITS:
- Removes 99%+ of contaminants including chlorine, lead, bacteria, and dissolved solids
- Unlike basic filtration, RO pushes water through a semi-permeable membrane
- Wellsys systems ADD BACK beneficial minerals after purification
- The water is pH-balanced to optimal drinking levels (slightly alkaline)
- The result is water that tastes crisp, clean, and refreshing

ENVIRONMENTAL BENEFITS:
- Eliminates plastic bottle waste completely
- No delivery trucks constantly running to deliver heavy bottles
- Reduces carbon footprint significantly
- No bottles to store, lift, or dispose of
- Better for the planet AND more convenient

WORKPLACE BENEFITS:
- Employees stay better hydrated = improved productivity and focus
- No more scheduling bottle deliveries or running out of water
- Eliminates the "water cooler shuffle" of lifting heavy 5-gallon jugs
- Professional appearance for clients and visitors
- Easy monthly rental includes all maintenance and filter changes
- Ice machines provide fresh, filtered ice for break rooms

BUSINESS DETAILS:
- Cunningham Pure Water LLC serves ALL of Louisiana
- Located at 1215 Texas Ave., Alexandria, LA 71301
- Phone: (318) 727-PURE (727-7873)
- Email: admin@cpwsales.com
- Hassle-free rental programs - no large upfront equipment costs

FREE TRIAL DEMO:
- Cunningham Pure Water offers FREE trial demo installations!
- Businesses can try a water cooler or ice machine of their choice
- No obligation, no pressure - just pure water to experience
- This lets customers see the quality difference firsthand
- To schedule a free trial demo, they can call (318) 727-PURE or fill out the contact form

Keep responses conversational and relatively brief (2-4 sentences usually). If someone seems interested, encourage them to request a FREE trial demo installation. Always be helpful and informative without being salesy. If asked about pricing, let them know that rental programs are affordable and they should contact Cunningham Pure Water for a custom quote based on their needs.

Remember: You're a fun, friendly water drop character - let your personality shine through! ðŸ’§`;async function sm(e){try{let{messages:t}=await e.json(),s=(await sp.messages.create({model:"claude-sonnet-4-20250514",max_tokens:500,system:sf,messages:t.map(e=>({role:e.role,content:e.content}))})).content.find(e=>"text"===e.type),r=s&&"text"in s?s.text:"";return sd.NextResponse.json({message:r})}catch(e){return console.error("Chat API error:",e),sd.NextResponse.json({error:"Failed to get response"},{status:500})}}e.s(["POST",()=>sm],1351);var sg=e.i(1351);let sy=new eg.AppRouteRouteModule({definition:{kind:ey.RouteKind.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/chat/route.ts",nextConfigOutput:"",userland:sg}),{workAsyncStorage:sb,workUnitAsyncStorage:sw,serverHooks:s_}=sy;function sv(){return(0,eb.patchFetch)({workAsyncStorage:sb,workUnitAsyncStorage:sw})}async function sk(e,t,s){sy.isDev&&(0,ew.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let r="/api/chat/route";r=r.replace(/\/index$/,"")||"/";let n=await sy.prepare(e,t,{srcPage:r,multiZoneDraftMode:!1});if(!n)return t.statusCode=400,t.end("Bad Request"),null==s.waitUntil||s.waitUntil.call(s,Promise.resolve()),null;let{buildId:a,params:i,nextConfig:o,parsedUrl:l,isDraftMode:h,prerenderManifest:u,routerServerContext:c,isOnDemandRevalidate:d,revalidateOnlyGenerated:p,resolvedPathname:f,clientReferenceManifest:m,serverActionsManifest:g}=n,y=(0,eS.normalizeAppPath)(r),b=!!(u.dynamicRoutes[y]||u.routes[f]),w=async()=>((null==c?void 0:c.render404)?await c.render404(e,t,l,!1):t.end("This page could not be found"),null);if(b&&!h){let e=!!u.routes[f],t=u.dynamicRoutes[y];if(t&&!1===t.fallback&&!e){if(o.experimental.adapterPath)return await w();throw new e$.NoFallbackError}}let _=null;!b||sy.isDev||h||(_="/index"===(_=f)?"/":_);let v=!0===sy.isDev||!b,k=b&&!v;g&&m&&(0,ev.setReferenceManifestsSingleton)({page:r,clientReferenceManifest:m,serverActionsManifest:g,serverModuleMap:(0,ek.createServerModuleMap)({serverActionsManifest:g})});let S=e.method||"GET",x=(0,e_.getTracer)(),R=x.getActiveScopeSpan(),E={params:i,prerenderManifest:u,renderOpts:{experimental:{authInterrupts:!!o.experimental.authInterrupts},cacheComponents:!!o.cacheComponents,supportsDynamicResponse:v,incrementalCache:(0,ew.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:o.cacheLife,waitUntil:s.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,s,r)=>sy.onRequestError(e,t,r,c)},sharedContext:{buildId:a}},P=new ex.NodeNextRequest(e),M=new ex.NodeNextResponse(t),T=eR.NextRequestAdapter.fromNodeNextRequest(P,(0,eR.signalFromNodeResponse)(t));try{let n=async e=>sy.handle(T,E).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let s=x.getRootSpanAttributes();if(!s)return;if(s.get("next.span_type")!==eE.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${s.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=s.get("next.route");if(n){let t=`${S} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${S} ${r}`)}),a=!!(0,ew.getRequestMeta)(e,"minimalMode"),i=async i=>{var l,f;let m=async({previousCacheEntry:o})=>{try{if(!a&&d&&p&&!o)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let r=await n(i);e.fetchMetrics=E.renderOpts.fetchMetrics;let l=E.renderOpts.pendingWaitUntil;l&&s.waitUntil&&(s.waitUntil(l),l=void 0);let h=E.renderOpts.collectedTags;if(!b)return await (0,eM.sendResponse)(P,M,r,E.renderOpts.pendingWaitUntil),null;{let e=await r.blob(),t=(0,eT.toNodeOutgoingHttpHeaders)(r.headers);h&&(t[eO.NEXT_CACHE_TAGS_HEADER]=h),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let s=void 0!==E.renderOpts.collectedRevalidate&&!(E.renderOpts.collectedRevalidate>=eO.INFINITE_CACHE)&&E.renderOpts.collectedRevalidate,n=void 0===E.renderOpts.collectedExpire||E.renderOpts.collectedExpire>=eO.INFINITE_CACHE?void 0:E.renderOpts.collectedExpire;return{value:{kind:eN.CachedRouteKind.APP_ROUTE,status:r.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:s,expire:n}}}}catch(t){throw(null==o?void 0:o.isStale)&&await sy.onRequestError(e,t,{routerKind:"App Router",routePath:r,routeType:"route",revalidateReason:(0,eP.getRevalidateReason)({isStaticGeneration:k,isOnDemandRevalidate:d})},c),t}},g=await sy.handleResponse({req:e,nextConfig:o,cacheKey:_,routeKind:ey.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:u,isRoutePPREnabled:!1,isOnDemandRevalidate:d,revalidateOnlyGenerated:p,responseGenerator:m,waitUntil:s.waitUntil,isMinimalMode:a});if(!b)return null;if((null==g||null==(l=g.value)?void 0:l.kind)!==eN.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==g||null==(f=g.value)?void 0:f.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});a||t.setHeader("x-nextjs-cache",d?"REVALIDATED":g.isMiss?"MISS":g.isStale?"STALE":"HIT"),h&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let y=(0,eT.fromNodeOutgoingHttpHeaders)(g.value.headers);return a&&b||y.delete(eO.NEXT_CACHE_TAGS_HEADER),!g.cacheControl||t.getHeader("Cache-Control")||y.get("Cache-Control")||y.set("Cache-Control",(0,eA.getCacheControlHeader)(g.cacheControl)),await (0,eM.sendResponse)(P,M,new Response(g.value.body,{headers:y,status:g.value.status||200})),null};R?await i(R):await x.withPropagatedContext(e.headers,()=>x.trace(eE.BaseServerSpan.handleRequest,{spanName:`${S} ${r}`,kind:e_.SpanKind.SERVER,attributes:{"http.method":S,"http.target":e.url}},i))}catch(t){if(t instanceof e$.NoFallbackError||await sy.onRequestError(e,t,{routerKind:"App Router",routePath:y,routeType:"route",revalidateReason:(0,eP.getRevalidateReason)({isStaticGeneration:k,isOnDemandRevalidate:d})}),b)throw t;return await (0,eM.sendResponse)(P,M,new Response(null,{status:500})),null}}e.s(["handler",()=>sk,"patchFetch",()=>sv,"routeModule",()=>sy,"serverHooks",()=>s_,"workAsyncStorage",()=>sb,"workUnitAsyncStorage",()=>sw],99280)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_1cb6f5ec.js.map